<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Here we provide a detailed analysis using more sophisticated statistics techniques.">

<title>Analysis – MA [46]15 Final Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">MA [46]15 Final Project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./big_picture.html"> 
<span class="menu-text">Big Picture</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./analysis.html" aria-current="page"> 
<span class="menu-text">Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data.html"> 
<span class="menu-text">Data</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#section-1-exploratory-data-analysis" id="toc-section-1-exploratory-data-analysis" class="nav-link" data-scroll-target="#section-1-exploratory-data-analysis">Section 1: Exploratory Data Analysis</a>
  <ul class="collapse">
  <li><a href="#top-10-schools-with-the-highest-number-of-students-enrolled-in-free-and-reduced-lunch-programs" id="toc-top-10-schools-with-the-highest-number-of-students-enrolled-in-free-and-reduced-lunch-programs" class="nav-link" data-scroll-target="#top-10-schools-with-the-highest-number-of-students-enrolled-in-free-and-reduced-lunch-programs">1.1 Top 10 Schools with the Highest Number of Students Enrolled in Free and Reduced Lunch Programs</a></li>
  </ul></li>
  <li><a href="#minority-breakdown-for-the-top-10-schools-with-the-most-free-and-reduced-lunch-enrollments" id="toc-minority-breakdown-for-the-top-10-schools-with-the-most-free-and-reduced-lunch-enrollments" class="nav-link" data-scroll-target="#minority-breakdown-for-the-top-10-schools-with-the-most-free-and-reduced-lunch-enrollments">1.2 - Minority Breakdown for the Top 10 Schools with the Most Free and Reduced Lunch Enrollments</a></li>
  <li><a href="#minority-student-ratios-in-top-schools" id="toc-minority-student-ratios-in-top-schools" class="nav-link" data-scroll-target="#minority-student-ratios-in-top-schools">Minority Student Ratios in Top Schools</a>
  <ul class="collapse">
  <li><a href="#highlands-community-charter-school-sacramento-ca" id="toc-highlands-community-charter-school-sacramento-ca" class="nav-link" data-scroll-target="#highlands-community-charter-school-sacramento-ca">Highlands Community Charter School (Sacramento, CA)</a></li>
  <li><a href="#north-star-academy-charter-school-newark-nj" id="toc-north-star-academy-charter-school-newark-nj" class="nav-link" data-scroll-target="#north-star-academy-charter-school-newark-nj">North Star Academy Charter School (Newark, NJ)</a></li>
  <li><a href="#alabama-connections-academy-athens-al" id="toc-alabama-connections-academy-athens-al" class="nav-link" data-scroll-target="#alabama-connections-academy-athens-al">Alabama Connections Academy (Athens, AL)</a></li>
  <li><a href="#reading-senior-high-school-reading-pa" id="toc-reading-senior-high-school-reading-pa" class="nav-link" data-scroll-target="#reading-senior-high-school-reading-pa">Reading Senior High School (Reading, PA)</a></li>
  <li><a href="#california-virtual-academy-simi-valley-ca" id="toc-california-virtual-academy-simi-valley-ca" class="nav-link" data-scroll-target="#california-virtual-academy-simi-valley-ca">California Virtual Academy (Simi Valley, CA)</a></li>
  <li><a href="#upper-darby-senior-high-school-drexel-hill-pa" id="toc-upper-darby-senior-high-school-drexel-hill-pa" class="nav-link" data-scroll-target="#upper-darby-senior-high-school-drexel-hill-pa">Upper Darby Senior High School (Drexel Hill, PA)</a></li>
  <li><a href="#river-springs-charter-school-temecula-ca" id="toc-river-springs-charter-school-temecula-ca" class="nav-link" data-scroll-target="#river-springs-charter-school-temecula-ca">River Springs Charter School (Temecula, CA)</a></li>
  <li><a href="#north-shore-senior-high-school-houston-tx" id="toc-north-shore-senior-high-school-houston-tx" class="nav-link" data-scroll-target="#north-shore-senior-high-school-houston-tx">North Shore Senior High School (Houston, TX)</a></li>
  <li><a href="#visions-in-education-carmichael-ca" id="toc-visions-in-education-carmichael-ca" class="nav-link" data-scroll-target="#visions-in-education-carmichael-ca">Visions In Education (Carmichael, CA)</a></li>
  <li><a href="#paramount-high-paramount-ca" id="toc-paramount-high-paramount-ca" class="nav-link" data-scroll-target="#paramount-high-paramount-ca">Paramount High (Paramount, CA)</a></li>
  </ul></li>
  <li><a href="#top-10-schools-with-the-largest-minority-populations" id="toc-top-10-schools-with-the-largest-minority-populations" class="nav-link" data-scroll-target="#top-10-schools-with-the-largest-minority-populations">1.3 Top 10 Schools with the Largest Minority Populations</a></li>
  <li><a href="#section-2-cross-comparison" id="toc-section-2-cross-comparison" class="nav-link" data-scroll-target="#section-2-cross-comparison">Section 2: Cross-Comparison</a></li>
  <li><a href="#minority-student-ratios-in-top-schools-1" id="toc-minority-student-ratios-in-top-schools-1" class="nav-link" data-scroll-target="#minority-student-ratios-in-top-schools-1">Minority Student Ratios in Top Schools</a>
  <ul class="collapse">
  <li><a href="#highlands-community-charter-school-sacramento-ca-1" id="toc-highlands-community-charter-school-sacramento-ca-1" class="nav-link" data-scroll-target="#highlands-community-charter-school-sacramento-ca-1">Highlands Community Charter School (Sacramento, CA)</a></li>
  <li><a href="#north-star-academy-charter-school-newark-nj-1" id="toc-north-star-academy-charter-school-newark-nj-1" class="nav-link" data-scroll-target="#north-star-academy-charter-school-newark-nj-1">North Star Academy Charter School (Newark, NJ)</a></li>
  <li><a href="#alabama-connections-academy-athens-al-1" id="toc-alabama-connections-academy-athens-al-1" class="nav-link" data-scroll-target="#alabama-connections-academy-athens-al-1">Alabama Connections Academy (Athens, AL)</a></li>
  <li><a href="#reading-senior-high-school-reading-pa-1" id="toc-reading-senior-high-school-reading-pa-1" class="nav-link" data-scroll-target="#reading-senior-high-school-reading-pa-1">Reading Senior High School (Reading, PA)</a></li>
  <li><a href="#california-virtual-academy-simi-valley-ca-1" id="toc-california-virtual-academy-simi-valley-ca-1" class="nav-link" data-scroll-target="#california-virtual-academy-simi-valley-ca-1">California Virtual Academy (Simi Valley, CA)</a></li>
  <li><a href="#upper-darby-senior-high-school-drexel-hill-pa-1" id="toc-upper-darby-senior-high-school-drexel-hill-pa-1" class="nav-link" data-scroll-target="#upper-darby-senior-high-school-drexel-hill-pa-1">Upper Darby Senior High School (Drexel Hill, PA)</a></li>
  <li><a href="#river-springs-charter-school-temecula-ca-1" id="toc-river-springs-charter-school-temecula-ca-1" class="nav-link" data-scroll-target="#river-springs-charter-school-temecula-ca-1">River Springs Charter School (Temecula, CA)</a></li>
  <li><a href="#north-shore-senior-high-school-houston-tx-1" id="toc-north-shore-senior-high-school-houston-tx-1" class="nav-link" data-scroll-target="#north-shore-senior-high-school-houston-tx-1">North Shore Senior High School (Houston, TX)</a></li>
  <li><a href="#visions-in-education-carmichael-ca-1" id="toc-visions-in-education-carmichael-ca-1" class="nav-link" data-scroll-target="#visions-in-education-carmichael-ca-1">Visions In Education (Carmichael, CA)</a></li>
  <li><a href="#paramount-high-paramount-ca-1" id="toc-paramount-high-paramount-ca-1" class="nav-link" data-scroll-target="#paramount-high-paramount-ca-1">Paramount High (Paramount, CA)</a></li>
  </ul></li>
  <li><a href="#section-3-statistical-modeling" id="toc-section-3-statistical-modeling" class="nav-link" data-scroll-target="#section-3-statistical-modeling">Section 3: Statistical Modeling</a>
  <ul class="collapse">
  <li><a href="#modeling" id="toc-modeling" class="nav-link" data-scroll-target="#modeling">3.1 - Modeling</a></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">3.2 - Limitations</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analysis</h1>
</div>

<div>
  <div class="description">
    Here we provide a detailed analysis using more sophisticated statistics techniques.
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><img src="images/Lunchbox.webp" class="img-fluid"></p>
<p>This comes from the file <code>analysis.qmd</code>.</p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Throughout this semester, our team has aimed to answer the following questions:</p>
<blockquote class="blockquote">
<p><em>Is dependency on Free and Reduced Lunch programs in public schools proportional to the minority population in those areas? That is, are more students enrolled in such programs when they come from an area that is predominantly African American groups, Hispanic groups, etc.?</em></p>
</blockquote>
<p>By looking at public school data retained from the <strong>Common Core</strong> and cross-comparing with <strong>Census data</strong> obtained from the government, we have been able to compile our findings as presented below.</p>
<hr>
</section>
<section id="section-1-exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="section-1-exploratory-data-analysis">Section 1: Exploratory Data Analysis</h2>
<p>Load the necessary data set here:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">getwd</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/richardpilleul/Documents/Boston University/Fall 24/CAS MA 415/HW3/ma-4615-fa24-final-project-group-8"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"dataset/clean_aid_data.rds"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="top-10-schools-with-the-highest-number-of-students-enrolled-in-free-and-reduced-lunch-programs" class="level3">
<h3 class="anchored" data-anchor-id="top-10-schools-with-the-highest-number-of-students-enrolled-in-free-and-reduced-lunch-programs">1.1 Top 10 Schools with the Highest Number of Students Enrolled in Free and Reduced Lunch Programs</h3>
<p>We start by extracting the top 10 schools from the school year <strong>2022–2023</strong> with the highest number of students enrolled in government-aided lunch programs. Here, we considered both the <strong>Free Lunch Program</strong> and the <strong>Reduced Lunch Program</strong>, combining data from both.</p>
<p><img src="images/Top 10 Schools.png" class="img-fluid"></p>
<p>From the data, the <strong>top 10 schools</strong> with the highest enrollment rates are:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 65%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th><strong>School Name</strong></th>
<th><strong>Enrollment Rate (%)</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Highlands Community Charter</td>
<td>85.6%</td>
</tr>
<tr class="even">
<td>North Star Academy Charter School</td>
<td>83.7%</td>
</tr>
<tr class="odd">
<td>Alabama Connections Academy</td>
<td>65.1%</td>
</tr>
<tr class="even">
<td>Reading SHS</td>
<td>85.7%</td>
</tr>
<tr class="odd">
<td>California Virtual Academy @ Los Angeles</td>
<td>73.7%</td>
</tr>
<tr class="even">
<td>Upper Darby SHS</td>
<td>95.0%</td>
</tr>
<tr class="odd">
<td>River Springs Charter</td>
<td>57.8%</td>
</tr>
<tr class="even">
<td>North Shore Senior High</td>
<td>85.7%</td>
</tr>
<tr class="odd">
<td>Visions in Education</td>
<td>55.2%</td>
</tr>
<tr class="even">
<td>Paramount High</td>
<td>94.3%</td>
</tr>
</tbody>
</table>
<p>Throughout the rest of this analysis, our team chose to focus on these 10 schools.</p>
</section>
</section>
<section id="minority-breakdown-for-the-top-10-schools-with-the-most-free-and-reduced-lunch-enrollments" class="level2">
<h2 class="anchored" data-anchor-id="minority-breakdown-for-the-top-10-schools-with-the-most-free-and-reduced-lunch-enrollments">1.2 - Minority Breakdown for the Top 10 Schools with the Most Free and Reduced Lunch Enrollments</h2>
<p>Now, we want to break down the ratio of minority students within these schools.</p>
<p>Here’s a clean and organized version for your <strong>Analysis Page</strong> using headings, bullet points, and tables to make the information clear and easy to digest:</p>
<hr>
</section>
<section id="minority-student-ratios-in-top-schools" class="level2">
<h2 class="anchored" data-anchor-id="minority-student-ratios-in-top-schools">Minority Student Ratios in Top Schools</h2>
<p>To understand the relationship between <strong>minority student populations</strong> and the <strong>Free or Reduced Lunch Program</strong> participation rates, we analyzed the top schools.</p>
<section id="highlands-community-charter-school-sacramento-ca" class="level3">
<h3 class="anchored" data-anchor-id="highlands-community-charter-school-sacramento-ca">Highlands Community Charter School (Sacramento, CA)</h3>
<ul>
<li><strong>Free or Reduced Lunch</strong>: 85%<br>
</li>
<li><strong>Minority Population in School</strong>:
<ul>
<li>Hispanic: 20.4%<br>
</li>
<li>African American: 2.5%<br>
</li>
<li>Asian: 19.4%<br>
</li>
<li><strong>Total Minority</strong>: 42.3%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="north-star-academy-charter-school-newark-nj" class="level3">
<h3 class="anchored" data-anchor-id="north-star-academy-charter-school-newark-nj">North Star Academy Charter School (Newark, NJ)</h3>
<ul>
<li><strong>Free or Reduced Lunch</strong>: 84%<br>
</li>
<li><strong>Minority Population in School</strong>:
<ul>
<li>Hispanic: 16.6%<br>
</li>
<li>African American: 80.8%<br>
</li>
<li>Asian: 0.2%<br>
</li>
<li><strong>Total Minority</strong>: 97.6%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="alabama-connections-academy-athens-al" class="level3">
<h3 class="anchored" data-anchor-id="alabama-connections-academy-athens-al">Alabama Connections Academy (Athens, AL)</h3>
<ul>
<li><strong>Free or Reduced Lunch</strong>: 65%<br>
</li>
<li><strong>Minority Population in School</strong>:
<ul>
<li>Hispanic: 5.8%<br>
</li>
<li>African American: 29.8%<br>
</li>
<li>Asian: 0.8%<br>
</li>
<li><strong>Total Minority</strong>: 36.4%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="reading-senior-high-school-reading-pa" class="level3">
<h3 class="anchored" data-anchor-id="reading-senior-high-school-reading-pa">Reading Senior High School (Reading, PA)</h3>
<ul>
<li><strong>Free or Reduced Lunch</strong>: 86%<br>
</li>
<li><strong>Minority Population in School</strong>:
<ul>
<li>Hispanic: 86.4%<br>
</li>
<li>African American: 7.4%<br>
</li>
<li>Asian: 0.1%<br>
</li>
<li><strong>Total Minority</strong>: 93.9%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="california-virtual-academy-simi-valley-ca" class="level3">
<h3 class="anchored" data-anchor-id="california-virtual-academy-simi-valley-ca">California Virtual Academy (Simi Valley, CA)</h3>
<ul>
<li><strong>Free or Reduced Lunch</strong>: 74%<br>
</li>
<li><strong>Minority Population in School</strong>:
<ul>
<li>Hispanic: 53.6%<br>
</li>
<li>African American: 20%<br>
</li>
<li>Asian: 5.5%<br>
</li>
<li><strong>Total Minority</strong>: 79.1%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="upper-darby-senior-high-school-drexel-hill-pa" class="level3">
<h3 class="anchored" data-anchor-id="upper-darby-senior-high-school-drexel-hill-pa">Upper Darby Senior High School (Drexel Hill, PA)</h3>
<ul>
<li><strong>Free or Reduced Lunch</strong>: 95%<br>
</li>
<li><strong>Minority Population in School</strong>:
<ul>
<li>Hispanic: 12.9%<br>
</li>
<li>African American: 52.2%<br>
</li>
<li>Asian: 14.1%<br>
</li>
<li><strong>Total Minority</strong>: 79.2%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="river-springs-charter-school-temecula-ca" class="level3">
<h3 class="anchored" data-anchor-id="river-springs-charter-school-temecula-ca">River Springs Charter School (Temecula, CA)</h3>
<ul>
<li><strong>Free or Reduced Lunch</strong>: 58%<br>
</li>
<li><strong>Minority Population in School</strong>:
<ul>
<li>Hispanic: 48.8%<br>
</li>
<li>African American: 4.7%<br>
</li>
<li>Asian: 2.5%<br>
</li>
<li><strong>Total Minority</strong>: 56%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="north-shore-senior-high-school-houston-tx" class="level3">
<h3 class="anchored" data-anchor-id="north-shore-senior-high-school-houston-tx">North Shore Senior High School (Houston, TX)</h3>
<ul>
<li><strong>Free or Reduced Lunch</strong>: 86%<br>
</li>
<li><strong>Minority Population in School</strong>:
<ul>
<li>Hispanic: 71.7%<br>
</li>
<li>African American: 22.3%<br>
</li>
<li>Asian: 0.9%<br>
</li>
<li><strong>Total Minority</strong>: 94.9%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="visions-in-education-carmichael-ca" class="level3">
<h3 class="anchored" data-anchor-id="visions-in-education-carmichael-ca">Visions In Education (Carmichael, CA)</h3>
<ul>
<li><strong>Free or Reduced Lunch</strong>: 55%<br>
</li>
<li><strong>Minority Population in School</strong>:
<ul>
<li>Hispanic: 31.6%<br>
</li>
<li>African American: 8.8%<br>
</li>
<li>Asian: 5.4%<br>
</li>
<li><strong>Total Minority</strong>: 45.8%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="paramount-high-paramount-ca" class="level3">
<h3 class="anchored" data-anchor-id="paramount-high-paramount-ca">Paramount High (Paramount, CA)</h3>
<ul>
<li><strong>Free or Reduced Lunch</strong>: 94%<br>
</li>
<li><strong>Minority Population in School</strong>:
<ul>
<li>Hispanic: 89.9%<br>
</li>
<li>African American: 6.7%<br>
</li>
<li>Asian: 1.3%<br>
</li>
<li><strong>Total Minority</strong>: 97.9%</li>
</ul></li>
</ul>
<hr>
<p>Among the top 10 schools with the highest enrollment rates of students in the Free and Reduced Lunch programs, those with the largest minority populations—particularly African American and Hispanic students—also had the highest number of students relying on these government programs. This suggests a potential correlation between a larger African American and Hispanic student population and increased program participation. In the following section, we will cross-reference this data with census data to examine whether a higher minority population in general corresponds to a greater percentage of students enrolled in these programs.</p>
</section>
</section>
<section id="top-10-schools-with-the-largest-minority-populations" class="level2">
<h2 class="anchored" data-anchor-id="top-10-schools-with-the-largest-minority-populations">1.3 Top 10 Schools with the Largest Minority Populations</h2>
<p>Another part of our team’s analysis included finding the top 10 schools with the highest minority populations to see if they would match the schools with the highest enrollment rates in Free and Reduced Lunch programs. The list was as follows:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 65%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th><strong>School Name</strong></th>
<th><strong>Minority Percentage (%)</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>North Star Academy Charter School</td>
<td>98.7%</td>
</tr>
<tr class="even">
<td>Reading SHS</td>
<td>95.9%</td>
</tr>
<tr class="odd">
<td>Brooklyn Technical High School</td>
<td>77.3%</td>
</tr>
<tr class="even">
<td>California Virtual Academy @ Los Angeles</td>
<td>83.4%</td>
</tr>
<tr class="odd">
<td>Granada Hills Charter</td>
<td>75.6%</td>
</tr>
<tr class="even">
<td>Duncanville H S</td>
<td>98.1%</td>
</tr>
<tr class="odd">
<td>North Shore Senior High</td>
<td>96.0%</td>
</tr>
<tr class="even">
<td>River Springs Charter</td>
<td>63.4%</td>
</tr>
<tr class="odd">
<td>John A. Ferguson Senior High</td>
<td>96.7%</td>
</tr>
<tr class="even">
<td>Blue Ridge Academy</td>
<td>61.1%</td>
</tr>
</tbody>
</table>
<p>Several schools appeared on both lists—<strong>North Star Academy Charter School</strong>, <strong>Reading SHS</strong>, <strong>California Virtual Academy @ Los Angeles</strong>, and <strong>North Shore Senior High</strong>—further supporting our theory that a higher proportion of minority students is associated with a greater percentage of students enrolled in Free and Reduced Lunch programs.</p>
</section>
<section id="section-2-cross-comparison" class="level2">
<h2 class="anchored" data-anchor-id="section-2-cross-comparison">Section 2: Cross-Comparison</h2>
<p>After finding the top ten schools with the largest amount of students in Free and Reduced Lunch Programs above, we aim to see if there is a correlation between the proportion of minorities in those schools and the proportion of minorities in the surrounding county.</p>
<p>Here’s a clean and organized version for your <strong>Analysis Page</strong> using headings, bullet points, and tables to make the information clear and easy to digest:</p>
<hr>
</section>
<section id="minority-student-ratios-in-top-schools-1" class="level2">
<h2 class="anchored" data-anchor-id="minority-student-ratios-in-top-schools-1">Minority Student Ratios in Top Schools</h2>
<p>To understand the relationship between <strong>minority student populations</strong> and the <strong>Free or Reduced Lunch Program</strong> participation rates, we analyzed the top schools.</p>
<section id="highlands-community-charter-school-sacramento-ca-1" class="level3">
<h3 class="anchored" data-anchor-id="highlands-community-charter-school-sacramento-ca-1">Highlands Community Charter School (Sacramento, CA)</h3>
<ul>
<li><strong>Minority Population in Zip Code</strong>:
<ul>
<li>Hispanic: 36%<br>
</li>
<li>African American: 15%<br>
</li>
<li>Asian: 18%<br>
</li>
<li><strong>Total Minority</strong>: 69%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="north-star-academy-charter-school-newark-nj-1" class="level3">
<h3 class="anchored" data-anchor-id="north-star-academy-charter-school-newark-nj-1">North Star Academy Charter School (Newark, NJ)</h3>
<ul>
<li><strong>Minority Population in Zip Code</strong>:
<ul>
<li>Hispanic: 26%<br>
</li>
<li>African American: 49%<br>
</li>
<li>Asian: 0%<br>
</li>
<li><strong>Total Minority</strong>: 75%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="alabama-connections-academy-athens-al-1" class="level3">
<h3 class="anchored" data-anchor-id="alabama-connections-academy-athens-al-1">Alabama Connections Academy (Athens, AL)</h3>
<ul>
<li><strong>Minority Population in Zip Code</strong>:
<ul>
<li>Hispanic: 8%<br>
</li>
<li>African American: 4%<br>
</li>
<li>Asian: 0%<br>
</li>
<li><strong>Total Minority</strong>: 12%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="reading-senior-high-school-reading-pa-1" class="level3">
<h3 class="anchored" data-anchor-id="reading-senior-high-school-reading-pa-1">Reading Senior High School (Reading, PA)</h3>
<ul>
<li><strong>Minority Population in Zip Code</strong>:
<ul>
<li>Hispanic: 73%<br>
</li>
<li>African American: 6%<br>
</li>
<li>Asian: 0%<br>
</li>
<li><strong>Total Minority</strong>: 79%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="california-virtual-academy-simi-valley-ca-1" class="level3">
<h3 class="anchored" data-anchor-id="california-virtual-academy-simi-valley-ca-1">California Virtual Academy (Simi Valley, CA)</h3>
<ul>
<li><strong>Minority Population in Zip Code</strong>:
<ul>
<li>Hispanic: 26%<br>
</li>
<li>African American: 1%<br>
</li>
<li>Asian: 11%<br>
</li>
<li><strong>Total Minority</strong>: 38%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="upper-darby-senior-high-school-drexel-hill-pa-1" class="level3">
<h3 class="anchored" data-anchor-id="upper-darby-senior-high-school-drexel-hill-pa-1">Upper Darby Senior High School (Drexel Hill, PA)</h3>
<ul>
<li><strong>Minority Population in Zip Code</strong>:
<ul>
<li>Hispanic: 5%<br>
</li>
<li>African American: 19%<br>
</li>
<li>Asian: 5%<br>
</li>
<li><strong>Total Minority</strong>: 29%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="river-springs-charter-school-temecula-ca-1" class="level3">
<h3 class="anchored" data-anchor-id="river-springs-charter-school-temecula-ca-1">River Springs Charter School (Temecula, CA)</h3>
<ul>
<li><strong>Minority Population in Zip Code</strong>:
<ul>
<li>Hispanic: 26%<br>
</li>
<li>African American: 4%<br>
</li>
<li>Asian: 11%<br>
</li>
<li><strong>Total Minority</strong>: 41%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="north-shore-senior-high-school-houston-tx-1" class="level3">
<h3 class="anchored" data-anchor-id="north-shore-senior-high-school-houston-tx-1">North Shore Senior High School (Houston, TX)</h3>
<ul>
<li><strong>Minority Population in Zip Code</strong>:
<ul>
<li>Hispanic: 69%<br>
</li>
<li>African American: 16%<br>
</li>
<li>Asian: 4%<br>
</li>
<li><strong>Total Minority</strong>: 89%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="visions-in-education-carmichael-ca-1" class="level3">
<h3 class="anchored" data-anchor-id="visions-in-education-carmichael-ca-1">Visions In Education (Carmichael, CA)</h3>
<ul>
<li><strong>Minority Population in Zip Code</strong>:
<ul>
<li>Hispanic: 15%<br>
</li>
<li>African American: 6%<br>
</li>
<li>Asian: 8%<br>
</li>
<li><strong>Total Minority</strong>: 29%</li>
</ul></li>
</ul>
<hr>
</section>
<section id="paramount-high-paramount-ca-1" class="level3">
<h3 class="anchored" data-anchor-id="paramount-high-paramount-ca-1">Paramount High (Paramount, CA)</h3>
<ul>
<li><strong>Minority Population in Zip Code</strong>:
<ul>
<li>Hispanic: 81%<br>
</li>
<li>African American: 9%<br>
</li>
<li>Asian: 4%<br>
</li>
<li><strong>Total Minority</strong>: 94%</li>
</ul></li>
</ul>
<hr>
<p>One observation is that a high minority population at a school does not seem to necessarily correlate with the zip code the school is located in. Several schools yielded over 50% minority but the zip code yielded less than 25% minority; such as Upper Darby SHS and to a lesser extent, Athens Academy and Visions in Education. This helps to illustrate the extent of school segregation that takes place in our country.</p>
</section>
</section>
<section id="section-3-statistical-modeling" class="level2">
<h2 class="anchored" data-anchor-id="section-3-statistical-modeling">Section 3: Statistical Modeling</h2>
<section id="modeling" class="level3">
<h3 class="anchored" data-anchor-id="modeling">3.1 - Modeling</h3>
<p>Two models were used, namely, a negative binomial regression, and a logistic regression. Running the code below gives summary statistics with estimated coefficients and p values. For the negative binomial model, coefficients were exponentiated to convert them into rate ratios. Example interpretation: <code>American Indian/Alaska Native Students [Public School] 2022-23</code> has a rate ratio of 1.0023239. This means that, for every additional American Indian/Alaska Native student at a school, we can expect the count of free-lunch program enrolments at that school to increase by 0.23%. The first plot below shows the rate ratios for each race. Also, based on the summary statistics, all races have a statistically significant p value at the 5% level, and Asian students were the only race with a rate ratio slightly less than 1. This implies that for every additional Asian student at a school, we can expect the count of free-lunch program enrolments at that school to decrease very slightly. The plot below shows that American Indian/Alaska Native students brought the most impact into their schools regarding increasing free-lunch enrollment, while White and Asian students are much less impactful. There is also a relatively larger variance for American Indian/Alaska Native, Native Hawaiian/Other Pacific Islander, and Two or More Races students as opposed to the rest of the groups.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS) <span class="co"># Used for negative binomial regression</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'MASS'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    select</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span><span class="st">`</span><span class="at">Free Lunch Eligible [Public School] 2022-23</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data<span class="sc">$</span><span class="st">`</span><span class="at">Free Lunch Eligible [Public School] 2022-23</span><span class="st">`</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span><span class="st">`</span><span class="at">Black or African American Students [Public School] 2022-23</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data<span class="sc">$</span><span class="st">`</span><span class="at">Black or African American Students [Public School] 2022-23</span><span class="st">`</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span><span class="st">`</span><span class="at">White Students [Public School] 2022-23</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data<span class="sc">$</span><span class="st">`</span><span class="at">White Students [Public School] 2022-23</span><span class="st">`</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span><span class="st">`</span><span class="at">Hispanic Students [Public School] 2022-23</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data<span class="sc">$</span><span class="st">`</span><span class="at">Hispanic Students [Public School] 2022-23</span><span class="st">`</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span><span class="st">`</span><span class="at">American Indian/Alaska Native Students [Public School] 2022-23</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data<span class="sc">$</span><span class="st">`</span><span class="at">American Indian/Alaska Native Students [Public School] 2022-23</span><span class="st">`</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span><span class="st">`</span><span class="at">Asian or Asian/Pacific Islander [Public School] 2022-23</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data<span class="sc">$</span><span class="st">`</span><span class="at">Asian or Asian/Pacific Islander Students [Public School] 2022-23</span><span class="st">`</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span><span class="st">`</span><span class="at">Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data<span class="sc">$</span><span class="st">`</span><span class="at">Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23</span><span class="st">`</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span><span class="st">`</span><span class="at">Two or More Races Students [Public School] 2022-23</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data<span class="sc">$</span><span class="st">`</span><span class="at">Two or More Races Students [Public School] 2022-23</span><span class="st">`</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span><span class="st">`</span><span class="at">Total Race/Ethnicity [Public School] 2022-23</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data<span class="sc">$</span><span class="st">`</span><span class="at">Total Race/Ethnicity [Public School] 2022-23</span><span class="st">`</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Negative Binomial Regression</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>negative_binomial_model <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(<span class="st">`</span><span class="at">Free Lunch Eligible [Public School] 2022-23</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">White Students [Public School] 2022-23</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">Black or African American Students [Public School] 2022-23</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">Hispanic Students [Public School] 2022-23</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">American Indian/Alaska Native Students [Public School] 2022-23</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">Asian or Asian/Pacific Islander [Public School] 2022-23</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">Two or More Races Students [Public School] 2022-23</span><span class="st">`</span>, data)</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>summary_model_nb <span class="ot">&lt;-</span> <span class="fu">summary</span>(negative_binomial_model)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>coef_table <span class="ot">&lt;-</span> <span class="fu">coef</span>(summary_model_nb)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>exp_coef <span class="ot">&lt;-</span> <span class="fu">exp</span>(coef_table[, <span class="st">"Estimate"</span>])</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>conf_intervals <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="fu">confint</span>(negative_binomial_model))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>p_values <span class="ot">&lt;-</span> coef_table[, <span class="st">"Pr(&gt;|z|)"</span>]</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">race =</span> <span class="fu">rownames</span>(coef_table), <span class="at">rate_ratio =</span> exp_coef, <span class="at">confidence_lower =</span> conf_intervals[, <span class="dv">1</span>], <span class="at">confidence_higher =</span> conf_intervals[, <span class="dv">2</span>], <span class="at">p_val =</span> p_values)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                                                                                                         race
(Intercept)                                                                                                                       (Intercept)
`White Students [Public School] 2022-23`                                                             `White Students [Public School] 2022-23`
`Black or African American Students [Public School] 2022-23`                     `Black or African American Students [Public School] 2022-23`
`Hispanic Students [Public School] 2022-23`                                                       `Hispanic Students [Public School] 2022-23`
`American Indian/Alaska Native Students [Public School] 2022-23`             `American Indian/Alaska Native Students [Public School] 2022-23`
`Asian or Asian/Pacific Islander [Public School] 2022-23`                           `Asian or Asian/Pacific Islander [Public School] 2022-23`
`Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23` `Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23`
`Two or More Races Students [Public School] 2022-23`                                     `Two or More Races Students [Public School] 2022-23`
                                                                        rate_ratio
(Intercept)                                                            126.6246621
`White Students [Public School] 2022-23`                                 1.0004195
`Black or African American Students [Public School] 2022-23`             1.0022642
`Hispanic Students [Public School] 2022-23`                              1.0016503
`American Indian/Alaska Native Students [Public School] 2022-23`         1.0023239
`Asian or Asian/Pacific Islander [Public School] 2022-23`                0.9999274
`Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23`   1.0017825
`Two or More Races Students [Public School] 2022-23`                     1.0015075
                                                                       confidence_lower
(Intercept)                                                                 125.0208748
`White Students [Public School] 2022-23`                                      1.0003892
`Black or African American Students [Public School] 2022-23`                  1.0022091
`Hispanic Students [Public School] 2022-23`                                   1.0016217
`American Indian/Alaska Native Students [Public School] 2022-23`              1.0019913
`Asian or Asian/Pacific Islander [Public School] 2022-23`                     0.9998683
`Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23`        1.0013339
`Two or More Races Students [Public School] 2022-23`                          1.0012228
                                                                       confidence_higher
(Intercept)                                                                  128.2489354
`White Students [Public School] 2022-23`                                       1.0004500
`Black or African American Students [Public School] 2022-23`                   1.0023196
`Hispanic Students [Public School] 2022-23`                                    1.0016790
`American Indian/Alaska Native Students [Public School] 2022-23`               1.0026734
`Asian or Asian/Pacific Islander [Public School] 2022-23`                      0.9999877
`Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23`         1.0022565
`Two or More Races Students [Public School] 2022-23`                           1.0017935
                                                                               p_val
(Intercept)                                                             0.000000e+00
`White Students [Public School] 2022-23`                               4.772919e-174
`Black or African American Students [Public School] 2022-23`            0.000000e+00
`Hispanic Students [Public School] 2022-23`                             0.000000e+00
`American Indian/Alaska Native Students [Public School] 2022-23`        5.193674e-46
`Asian or Asian/Pacific Islander [Public School] 2022-23`               3.968014e-02
`Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23`  2.481767e-15
`Two or More Races Students [Public School] 2022-23`                    2.447502e-28</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> results[results<span class="sc">$</span>race <span class="sc">!=</span> <span class="st">"(Intercept)"</span>, ]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(results, <span class="fu">aes</span>(<span class="at">y =</span> race, <span class="at">x =</span> rate_ratio)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> confidence_lower, <span class="at">xmax =</span> confidence_higher), <span class="at">height =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Race"</span>, <span class="at">x =</span> <span class="st">"Rate Ratio"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(summary_model_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = `Free Lunch Eligible [Public School] 2022-23` ~ 
    `White Students [Public School] 2022-23` + `Black or African American Students [Public School] 2022-23` + 
        `Hispanic Students [Public School] 2022-23` + `American Indian/Alaska Native Students [Public School] 2022-23` + 
        `Asian or Asian/Pacific Islander [Public School] 2022-23` + 
        `Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23` + 
        `Two or More Races Students [Public School] 2022-23`, 
    data = data, init.theta = 2.65650311, link = log)

Coefficients:
                                                                         Estimate
(Intercept)                                                             4.841e+00
`White Students [Public School] 2022-23`                                4.194e-04
`Black or African American Students [Public School] 2022-23`            2.262e-03
`Hispanic Students [Public School] 2022-23`                             1.649e-03
`American Indian/Alaska Native Students [Public School] 2022-23`        2.321e-03
`Asian or Asian/Pacific Islander [Public School] 2022-23`              -7.265e-05
`Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23`  1.781e-03
`Two or More Races Students [Public School] 2022-23`                    1.506e-03
                                                                       Std. Error
(Intercept)                                                             5.376e-03
`White Students [Public School] 2022-23`                                1.491e-05
`Black or African American Students [Public School] 2022-23`            2.309e-05
`Hispanic Students [Public School] 2022-23`                             1.162e-05
`American Indian/Alaska Native Students [Public School] 2022-23`        1.630e-04
`Asian or Asian/Pacific Islander [Public School] 2022-23`               3.532e-05
`Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23`  2.250e-04
`Two or More Races Students [Public School] 2022-23`                    1.365e-04
                                                                       z value
(Intercept)                                                            900.595
`White Students [Public School] 2022-23`                                28.126
`Black or African American Students [Public School] 2022-23`            97.951
`Hispanic Students [Public School] 2022-23`                            141.848
`American Indian/Alaska Native Students [Public School] 2022-23`        14.240
`Asian or Asian/Pacific Islander [Public School] 2022-23`               -2.057
`Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23`   7.915
`Two or More Races Students [Public School] 2022-23`                    11.040
                                                                       Pr(&gt;|z|)
(Intercept)                                                             &lt; 2e-16
`White Students [Public School] 2022-23`                                &lt; 2e-16
`Black or African American Students [Public School] 2022-23`            &lt; 2e-16
`Hispanic Students [Public School] 2022-23`                             &lt; 2e-16
`American Indian/Alaska Native Students [Public School] 2022-23`        &lt; 2e-16
`Asian or Asian/Pacific Islander [Public School] 2022-23`                0.0397
`Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23` 2.48e-15
`Two or More Races Students [Public School] 2022-23`                    &lt; 2e-16
                                                                          
(Intercept)                                                            ***
`White Students [Public School] 2022-23`                               ***
`Black or African American Students [Public School] 2022-23`           ***
`Hispanic Students [Public School] 2022-23`                            ***
`American Indian/Alaska Native Students [Public School] 2022-23`       ***
`Asian or Asian/Pacific Islander [Public School] 2022-23`              *  
`Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23` ***
`Two or More Races Students [Public School] 2022-23`                   ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(2.6565) family taken to be 1)

    Null deviance: 72668  on 32844  degrees of freedom
Residual deviance: 35193  on 32837  degrees of freedom
AIC: 418533

Number of Fisher Scoring iterations: 1

              Theta:  2.6565 
          Std. Err.:  0.0202 

 2 x log-likelihood:  -418515.0600 </code></pre>
</div>
</div>
<p>The second model used was a logistic regression with a binary outcome variable indicating whether a majority of students at a school are enrolled in a free lunch program. Running the code would produce summary statistics and the second plot below illustrates the relationship. We did a regression on estimating the probability of a school having the majority of its students enrolled in a free-lunch program based on the percentage of minority students the school has. <code>minority_percentage</code> has a statistically significant odds coefficient of 1.0397006 at the 5% level, implying that a 1 percentage point increase in a school’s minority population is associated with a 3.97% increase in the odds that a school has the majority of its students enrolled in a free lunch program. It can also be seen that, as the percentage of minority students at a school increases, the probability of the majority of a school’s students being enrolled in a free lunch program increases exponentially, based on the nonlinear and positive relationship illustrated.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Logistic Regression</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">minority_percentage =</span> ((<span class="st">`</span><span class="at">Black or African American Students [Public School] 2022-23</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">Hispanic Students [Public School] 2022-23</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">American Indian/Alaska Native Students [Public School] 2022-23</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">Asian or Asian/Pacific Islander [Public School] 2022-23</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">Nat. Hawaiian or Other Pacific Isl. Students [Public School] 2022-23</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">Two or More Races Students [Public School] 2022-23</span><span class="st">`</span>) <span class="sc">/</span> <span class="st">`</span><span class="at">Total Race/Ethnicity [Public School] 2022-23</span><span class="st">`</span>) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">majority_free_lunch =</span> <span class="fu">if_else</span>(<span class="st">`</span><span class="at">Free Lunch Eligible [Public School] 2022-23</span><span class="st">`</span> <span class="sc">/</span> <span class="st">`</span><span class="at">Total Race/Ethnicity [Public School] 2022-23</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="fl">0.5</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>logistic_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(majority_free_lunch <span class="sc">~</span> minority_percentage, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), data)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>summary_model_l <span class="ot">&lt;-</span> <span class="fu">summary</span>(logistic_model)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>coef_table <span class="ot">&lt;-</span> <span class="fu">coef</span>(summary_model_l)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>exp_coef <span class="ot">&lt;-</span> <span class="fu">exp</span>(coef_table[, <span class="st">"Estimate"</span>])</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>conf_intervals <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="fu">confint</span>(logistic_model))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>p_values <span class="ot">&lt;-</span> coef_table[, <span class="st">"Pr(&gt;|z|)"</span>]</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">race =</span> <span class="fu">rownames</span>(coef_table), <span class="at">odds =</span> exp_coef, <span class="at">confidence_lower =</span> conf_intervals[, <span class="dv">1</span>], <span class="at">confidence_higher =</span> conf_intervals[, <span class="dv">2</span>], <span class="at">p_val =</span> p_values)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>minority_percentages <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">min_minority =</span> <span class="fu">min</span>(minority_percentage), <span class="at">max_minority =</span> <span class="fu">max</span>(minority_percentage))<span class="sc">|&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">minority_percentage =</span> <span class="fu">seq</span>(min_minority, max_minority, <span class="at">length.out =</span> <span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
dplyr 1.1.0.
ℹ Please use `reframe()` instead.
ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
  always returns an ungrouped data frame and adjust accordingly.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>minority_percentages<span class="sc">$</span>predicted_probability <span class="ot">&lt;-</span> <span class="fu">predict</span>(logistic_model, <span class="at">newdata =</span> minority_percentages, <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> minority_percentage, <span class="at">y =</span> majority_free_lunch)) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">data =</span> minority_percentages, <span class="fu">aes</span>(<span class="at">x =</span> minority_percentage, <span class="at">y =</span> predicted_probability)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Percentage of Minorities at a School"</span>, <span class="at">y =</span> <span class="st">"Predicted Probability"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(summary_model_l)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = majority_free_lunch ~ minority_percentage, family = binomial(link = "logit"), 
    data = data)

Coefficients:
                      Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)         -1.9366100  0.0281259  -68.86   &lt;2e-16 ***
minority_percentage  0.0389328  0.0004624   84.20   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 45153  on 32844  degrees of freedom
Residual deviance: 35984  on 32843  degrees of freedom
AIC: 35988

Number of Fisher Scoring iterations: 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                   race      odds confidence_lower
(Intercept)                 (Intercept) 0.1441919        0.1364338
minority_percentage minority_percentage 1.0397006        1.0387621
                    confidence_higher p_val
(Intercept)                 0.1523368     0
minority_percentage         1.0406466     0</code></pre>
</div>
</div>
<p>The analysis sheds light on some key socioeconomic issues around the country. There seems to be an evident racial disparity according to these models, where certain minority races have a greater impact on a school’s total free-lunch enrolment numbers than others, and that schools with a higher minority percentage of their student population tend to have higher chances of the majority of their student body being enrolled in these programs. This raises some questions on the factors contributing to this disparity. Does a greater proportion of American Indian/Alaska Native students or their families meet the requirements to be enrolled in a lunch program compared to Asian students? If enrollment is not automatic, could it be that students or families of certain races are more willing to apply for these free lunch programs?</p>
</section>
<section id="limitations" class="level3">
<h3 class="anchored" data-anchor-id="limitations">3.2 - Limitations</h3>
<p>The two or more races variable might have some confounding effects on the rest of the variables (if the data collection survey allowed for people to select multiple races, i.e.&nbsp;selecting White + Asian rather than the singular two or more races option, then the confounding effects might be even more severe). This could lead to bias induced in the estimated rate ratios for each race. Multicollinearity might also be a problem, as it may be likely that schools with a high percentage of a certain minority group might also have a high percentage of another minority group. Another problem with the two or more races variable is that there is a lot of ambiguity, and potentially varied results if we were to split it up into the different racial combinations. For example, students who are black and asian might have different results compared to students who are hispanic and black. Having this specific information could result in better estimates for each race.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/sussmanbu\.github\.io\/ma-4615-fa24-final-project-group-8\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>